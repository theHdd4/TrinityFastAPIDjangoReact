# Routing map for Trinity

The Cloudflare tunnel forwards `https://trinity.quantmatrixai.com` into the local host at `10.2.1.65` where Traefik dispatches requests by path. The `/admin` prefix is stripped so Django receives `/api/` and `/admin/` URLs without the leading segment.
Locally the same mapping is available through the frontend proxy on `http://10.2.1.65:8080`:

- `/` &rarr; React frontend container on `10.2.1.65:8080`
- `/admin/` &rarr; Django backend on `10.2.1.65:8000`
- `/app/` &rarr; FastAPI backend on `10.2.1.65:8001`

When calling Django directly on port `8000`, the `/admin` prefix is not removed.
Use `/api/...` paths in that case, e.g. `http://10.2.1.65:8000/api/accounts/login/`.

## Django REST API
All Django API endpoints start with `/api/` once the request reaches the backend. Examples include:
- `/api/accounts/login/`
- `/api/accounts/logout/`
- `/api/accounts/users/me/`
- `/api/registry/...`
- `/api/subscriptions/...`
- `/api/workflows/...`
- `/api/atoms/...`
- `/api/atom-configs/...`
- `/api/config-store/...`
- `/api/permissions/...`
- `/api/orchestration/...`
- `/api/tenants/...`
- `/api/roles/...`
- `/api/audit/...`

## FastAPI endpoints
FastAPI lives under `/app/`. Key paths are:
- `/app/feature-overview`
- `/app/cards/archive`
- `/app/data-upload-validate`
- `/app/t/` for text box operations

From the outside the Django API appears under `/admin/api/`, but Traefik removes the `/admin` prefix before forwarding the request. Internally the paths still begin with `/api/` as shown above.
