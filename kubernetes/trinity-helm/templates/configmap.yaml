apiVersion: v1
kind: ConfigMap
metadata:
  name: trinity-config
  namespace: {{ .Values.global.namespace }}
  labels:
    app: trinity
data:
  # Database URLs
  DATABASE_URL: "postgresql://{{ .Values.postgresql.username }}:{{ .Values.postgresql.password }}@postgresql:5432/{{ .Values.postgresql.database }}"
  MONGO_URI: "mongodb://{{ .Values.mongodb.rootUsername }}:{{ .Values.mongodb.rootPassword }}@mongodb:27017/trinity_prod?authSource=admin"
  CLASSIFY_MONGO_URI: "mongodb://{{ .Values.mongodb.rootUsername }}:{{ .Values.mongodb.rootPassword }}@mongodb:27017/?authSource=admin"
  REDIS_URL: "redis://redis:6379/0"
  
  # MinIO Configuration
  MINIO_ENDPOINT: "minio:9000"
  MINIO_ACCESS_KEY: "{{ .Values.minio.accessKey }}"
  MINIO_SECRET_KEY: "{{ .Values.minio.secretKey }}"
  
  # Service Discovery
  FLIGHT_HOST: "trinity-flight"
  FLIGHT_PORT: "8815"
  
  # CORS Configuration
  CORS_ALLOWED_ORIGINS: "{{ .Values.django.env.CORS_ALLOWED_ORIGINS }}"
  CSRF_TRUSTED_ORIGINS: "{{ .Values.django.env.CSRF_TRUSTED_ORIGINS }}"
  FASTAPI_CORS_ORIGINS: "{{ .Values.fastapi.env.FASTAPI_CORS_ORIGINS }}"
  
  # Host Configuration
  HOST_IP: "{{ .Values.django.env.HOST_IP }}"
  FRONTEND_PORT: "{{ .Values.django.env.FRONTEND_PORT }}"
  
  # AI Configuration
  OLLAMA_IP: "{{ .Values.ai.env.OLLAMA_IP }}"

